<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/brfv4_examples_theme.css">
	<title>Beyond Reality Face - BRFv4 - HTML5/Javascript face tracking</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  
	<script src="js/libs/createjs/preloadjs.min.js"></script>
	<script src="js/BRFv4Demo.js"></script>

	<script>
		window.onload = brfv4Example.start; //see js/BRFv4Demo.js
	</script>
  <style>
  
  </style>
</head>
  

<body>

<div id="_wrapper" >

  <div id="_content">
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
          <video  id="_webcam"></video>
          <canvas id="_imageData"></canvas>
          <canvas id="_faceSub"></canvas>
          <canvas id="_t3d"></canvas>
          <canvas id="_f3d"></canvas>
          <canvas id="_drawing"></canvas>
        </div>
      </div>
  </div>
  <center>
    <h1 id="title">
      Mind Blenderz
    </h1>
    <p id="tagline">
      World class products
    </p>
  <div class="row container whole">
    <div class="col-xs-12 col-lg-4">
      <div class="card" style="width: 18rem;">
        <img class="card-img-top" src="https://assets.ajio.com/medias/sys_master/root/h76/he8/12882593447966/-1117Wx1400H-460053163-yellow-MODEL.jpg" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title">Yellow Sun Glass</h5>
          <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
          <a href="#" onclick="loadThreeJS()" class="btn btn-primary tryonBtn">Tryon Loading...</a>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-lg-4">
      <div class="card" style="width: 18rem;">
        <img class="card-img-top" src="https://assets.ajio.com/medias/sys_master/root/h76/he8/12882593447966/-1117Wx1400H-460053163-yellow-MODEL.jpg" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title">Yellow Sun Glass</h5>
          <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
          <a href="#" onclick="loadThreeJS()" class="btn btn-primary tryonBtn">Tryon Loading...</a>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-lg-4">
      <div class="card" style="width: 18rem;">
        <img class="card-img-top" src="https://assets.ajio.com/medias/sys_master/root/h76/he8/12882593447966/-1117Wx1400H-460053163-yellow-MODEL.jpg" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title">Yellow Sun Glass</h5>
          <p class="card-text">Lorem ipsum dolor sit amet, no vix postea gloriatur, natum dolorem cum an.</p>
          <a href="#" onclick="loadThreeJS()" class="btn btn-primary tryonBtn">Tryon Loading...</a>
        </div>
      </div>
    </div>
  </div>
    </center>
  </div>
  

</body>

</html>

<script>
        sessionStorage.setItem("webcam", "loading");

  var loadWebcam, tryonBtn;
  tryonBtn = document.getElementsByClassName("tryonBtn");
  var setInter = setInterval(function () {
      loadWebcam = sessionStorage.getItem('webcam'); 
      if(loadWebcam == "loading"){
        disableTryon();
      }
      if(loadWebcam == "loaded"){
        enableTryon();
          clearInterval(setInter);

      }
  }, 3600);
  function disableTryon(){
      console.log(tryonBtn[0].text)
      for(let i = 0 ; i < tryonBtn.length ; i++)
        {
          tryonBtn[i].text = "Tryon Loading..."
        }
  }
  function enableTryon(){
      console.log(tryonBtn[0].text)
      for(let i = 0 ; i < tryonBtn.length ; i++)
        {
          tryonBtn[i].text = "Tryon"
        }
  }
  // Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
  function onExampleLoaded() {
		brfv4Example.reinit();
	}
  function loadThreeJS(){
      modal.style.display = "block";

      				brfv4Example.loader.loadExample(["js/examples/face_tracking/ThreeJS_example.js"], onExampleLoaded);
  }

</script>
